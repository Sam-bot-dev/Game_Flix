<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberGuard - Advanced Cybersecurity Suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-cyan: #00f3ff;
            --color-magenta: #ff00ff;
            --color-purple: #7d00ff;
            --color-blue: #0066ff;
            --color-bg-dark: #0a0e27;
            --color-surface: #1a1d2e;
            --color-text: #e0e6ed;
            --color-text-dim: #8892a6;
            --color-success: #00ff88;
            --color-warning: #ffaa00;
            --color-danger: #ff4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--color-bg-dark);
            color: var(--color-text);
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Animated Background */
        .cyber-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .grid-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translateY(0); }
            100% { transform: translateY(50px); }
        }

        .particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--color-cyan);
            border-radius: 50%;
            animation: float 15s infinite;
            box-shadow: 0 0 10px var(--color-cyan);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(26, 29, 46, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--color-cyan);
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.8);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-icon {
            font-size: 2rem;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--color-text);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--color-cyan);
            transition: width 0.3s ease;
        }

        .nav-links a:hover {
            color: var(--color-cyan);
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .btn-download {
            padding: 0.8rem 2rem;
            background: linear-gradient(135deg, var(--color-cyan), var(--color-purple));
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-download:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.5);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 6rem 2rem 2rem;
            text-align: center;
        }

        .hero-content {
            max-width: 900px;
            position: relative;
            z-index: 1;
        }

        .glitch {
            font-family: 'Orbitron', sans-serif;
            font-size: 4rem;
            font-weight: 900;
            color: var(--color-cyan);
            text-shadow: 0 0 30px rgba(0, 243, 255, 0.8);
            margin-bottom: 1rem;
            animation: glitchText 3s infinite;
        }

        @keyframes glitchText {
            0%, 90%, 100% { transform: translateX(0); }
            92% { transform: translateX(-5px); }
            94% { transform: translateX(5px); }
            96% { transform: translateX(-5px); }
        }

        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--color-text-dim);
            margin-bottom: 3rem;
            font-weight: 500;
        }

        .cta-buttons {
            display: flex;
            gap: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-primary {
            padding: 1.2rem 3rem;
            font-size: 1.2rem;
            background: linear-gradient(135deg, var(--color-cyan), var(--color-purple));
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 243, 255, 0.6);
        }

        .btn-secondary {
            padding: 1.2rem 3rem;
            font-size: 1.2rem;
            background: transparent;
            border: 2px solid var(--color-cyan);
            border-radius: 50px;
            color: var(--color-cyan);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-secondary:hover {
            background: rgba(0, 243, 255, 0.1);
            transform: translateY(-5px);
        }

        /* Features Section */
        .section {
            padding: 6rem 2rem;
            position: relative;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            font-size: 3rem;
            text-align: center;
            color: var(--color-cyan);
            margin-bottom: 1rem;
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
        }

        .section-subtitle {
            text-align: center;
            color: var(--color-text-dim);
            font-size: 1.2rem;
            margin-bottom: 4rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: rgba(26, 29, 46, 0.8);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 20px;
            padding: 2.5rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.1), rgba(125, 0, 255, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(0, 243, 255, 0.3);
            border-color: var(--color-cyan);
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            display: block;
        }

        .feature-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-cyan);
            margin-bottom: 1rem;
        }

        .feature-description {
            color: var(--color-text-dim);
            line-height: 1.8;
        }

        /* How It Works */
        .steps-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            margin-top: 4rem;
        }

        .step {
            text-align: center;
            position: relative;
        }

        .step-number {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--color-cyan), var(--color-purple));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 900;
            margin: 0 auto 1.5rem;
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.4);
        }

        .step-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-cyan);
            margin-bottom: 1rem;
        }

        /* Stats Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 4rem;
        }

        .stat-card {
            text-align: center;
            padding: 3rem 2rem;
            background: rgba(26, 29, 46, 0.8);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 20px;
        }

        .stat-number {
            font-size: 3.5rem;
            font-weight: 900;
            color: var(--color-cyan);
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.6);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--color-text-dim);
            font-size: 1.2rem;
        }

        /* Dashboard Preview */
        .dashboard-preview {
            background: rgba(26, 29, 46, 0.9);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 4rem;
            display: none;
        }

        .dashboard-preview.active {
            display: block;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-cyan);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
        }

        .sidebar {
            background: rgba(10, 14, 39, 0.8);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 15px;
            padding: 1.5rem;
        }

        .sidebar-item {
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .sidebar-item:hover {
            background: rgba(0, 243, 255, 0.1);
            border-left: 3px solid var(--color-cyan);
        }

        .sidebar-item.active {
            background: rgba(0, 243, 255, 0.2);
            border-left: 3px solid var(--color-cyan);
        }

        .dashboard-content {
            background: rgba(10, 14, 39, 0.6);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 15px;
            padding: 2rem;
            min-height: 500px;
        }

        /* Extension Popup Simulator */
        .extension-simulator {
            max-width: 400px;
            margin: 4rem auto;
            background: var(--color-surface);
            border: 2px solid var(--color-cyan);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 243, 255, 0.3);
        }

        .ext-header {
            padding: 1.5rem;
            background: var(--color-bg-dark);
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ext-tabs {
            display: flex;
            background: var(--color-bg-dark);
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
        }

        .ext-tab {
            flex: 1;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .ext-tab:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        .ext-tab.active {
            border-bottom-color: var(--color-cyan);
            color: var(--color-cyan);
        }

        .ext-content {
            padding: 2rem;
            min-height: 400px;
        }

        .ext-feature {
            display: none;
        }

        .ext-feature.active {
            display: block;
        }

        .input-field {
            width: 100%;
            padding: 1rem;
            background: var(--color-bg-dark);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 10px;
            color: var(--color-text);
            margin-bottom: 1rem;
            font-family: 'Rajdhani', sans-serif;
        }

        textarea.input-field {
            resize: vertical;
            min-height: 100px;
            font-family: 'Courier New', monospace;
        }

        .btn-analyze {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--color-cyan), var(--color-purple));
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-analyze:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.4);
        }

        .result-box {
            margin-top: 1.5rem;
            padding: 1.5rem;
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid var(--color-cyan);
            border-radius: 10px;
            display: none;
        }

        .result-box.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quiz-question {
            margin-bottom: 1.5rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .quiz-option {
            padding: 1rem;
            background: var(--color-bg-dark);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--color-cyan);
        }

        .helpline-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .helpline-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--color-bg-dark);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 10px;
        }

        .helpline-icon {
            font-size: 2rem;
        }

        .helpline-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-cyan);
        }

        /* Footer */
        footer {
            background: rgba(26, 29, 46, 0.95);
            border-top: 1px solid rgba(0, 243, 255, 0.3);
            padding: 3rem 2rem;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
        }

        .social-link {
            color: var(--color-text);
            font-size: 2rem;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            color: var(--color-cyan);
            transform: translateY(-5px);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--color-surface);
            border: 2px solid var(--color-cyan);
            border-radius: 20px;
            padding: 3rem;
            max-width: 600px;
            text-align: center;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            cursor: pointer;
            color: var(--color-text-dim);
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--color-cyan);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .glitch {
                font-size: 2.5rem;
            }

            .hero-subtitle {
                font-size: 1.2rem;
            }

            .nav-links {
                display: none;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .ext-tabs {
                flex-wrap: wrap;
            }

            .ext-tab {
                flex: 1 1 50%;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0, 243, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--color-cyan);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* VS Code Style Code Scanner */
        .vscode-container {
            background: #1e1e1e;
            border: 1px solid var(--color-cyan);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 243, 255, 0.3);
            max-width: 1200px;
            margin: 0 auto;
        }

        .vscode-header {
            background: #2d2d30;
            padding: 0.5rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #3e3e42;
        }

        .vscode-tabs {
            display: flex;
            gap: 0.5rem;
        }

        .vscode-tab {
            background: #1e1e1e;
            padding: 0.5rem 1rem;
            border-radius: 5px 5px 0 0;
            display: flex;
            align-items: center;
            color: var(--color-text);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .vscode-tab.active {
            background: #1e1e1e;
            border-top: 2px solid var(--color-cyan);
        }

        .vscode-actions {
            display: flex;
            gap: 0.5rem;
        }

        .vscode-btn {
            background: transparent;
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--color-cyan);
            padding: 0.4rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .vscode-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--color-cyan);
        }

        .vscode-editor {
            display: flex;
            background: #1e1e1e;
            min-height: 400px;
            position: relative;
        }

        .line-numbers {
            background: #1e1e1e;
            color: #858585;
            padding: 1rem 0.5rem;
            text-align: right;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            user-select: none;
            border-right: 1px solid #3e3e42;
            min-width: 50px;
            overflow-y: hidden;
            max-height: 400px;
        }

        .code-editor {
            flex: 1;
            background: #1e1e1e;
            color: #d4d4d4;
            border: none;
            padding: 1rem;
            font-family: 'Courier New', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
            tab-size: 4;
            max-height: 400px;
            overflow-y: auto;
        }

        .code-editor::selection {
            background: rgba(0, 243, 255, 0.3);
        }

        .vscode-footer {
            background: #007acc;
            padding: 0.8rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid #3e3e42;
        }

        .vscode-status {
            display: flex;
            gap: 1rem;
            color: white;
            font-size: 0.9rem;
            font-family: 'Courier New', monospace;
        }

        .btn-scan {
            background: linear-gradient(135deg, var(--color-cyan), var(--color-purple));
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 8px;
            color: white;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .btn-scan:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.5);
        }

        .scan-results {
            background: #252526;
            padding: 2rem;
            margin-top: 0;
            border-top: 1px solid #3e3e42;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #3e3e42;
        }

        .threat-badge {
            padding: 0.5rem 1.5rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .threat-badge.clean {
            background: rgba(0, 255, 136, 0.2);
            color: var(--color-success);
            border: 1px solid var(--color-success);
        }

        .threat-badge.warning {
            background: rgba(255, 170, 0, 0.2);
            color: var(--color-warning);
            border: 1px solid var(--color-warning);
        }

        .threat-badge.danger {
            background: rgba(255, 68, 68, 0.2);
            color: var(--color-danger);
            border: 1px solid var(--color-danger);
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .summary-item {
            background: #1e1e1e;
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(0, 243, 255, 0.3);
        }

        .summary-label {
            color: var(--color-text-dim);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .summary-value {
            font-size: 2rem;
            font-weight: 900;
            color: var(--color-cyan);
        }

        .issues-list {
            margin-top: 1.5rem;
        }

        .issue-item {
            background: #1e1e1e;
            border-left: 4px solid;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 5px;
        }

        .issue-item.critical {
            border-left-color: var(--color-danger);
        }

        .issue-item.high {
            border-left-color: var(--color-warning);
        }

        .issue-item.medium {
            border-left-color: #ffaa00;
        }

        .issue-item.low {
            border-left-color: var(--color-cyan);
        }

        .issue-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 0.5rem;
        }

        .issue-title {
            font-weight: 700;
            color: var(--color-cyan);
            font-size: 1rem;
        }

        .issue-severity {
            padding: 0.2rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .issue-description {
            color: var(--color-text-dim);
            margin: 0.5rem 0;
            line-height: 1.6;
        }

        .issue-code {
            background: #000;
            padding: 0.8rem;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #d4d4d4;
            margin-top: 0.8rem;
            overflow-x: auto;
        }

        .recommendations-box {
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid var(--color-cyan);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .recommendations-box ul li {
            padding: 0.8rem;
            margin-bottom: 0.8rem;
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid var(--color-cyan);
            border-radius: 5px;
            color: var(--color-text);
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="cyber-bg">
        <div class="grid-lines"></div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">‚ö°</span>
                CYBERGUARD
            </div>
            <ul class="nav-links">
                <li><a href="chatbot.html">Chatbot</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#how-it-works">How It Works</a></li>
                <li><a href="#dashboard">Dashboard</a></li>
                <li><a href="#code-scanner">CODE</a></li>
                <li><a href="#extension">Try Extension</a></li>
            </ul>
            <a href="#download" class="btn-download" id="downloadBtn">Download Extension</a>
        </div>
    </nav>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="glitch">DEFEND YOUR DIGITAL REALM</h1>
            <p class="hero-subtitle">Advanced AI-Powered Cybersecurity Suite for Real-Time Protection</p>
            <div class="cta-buttons">
                <a href="chatbot.html" class="btn-primary">Get Started</a>
                <a href="#features" class="btn-secondary">Explore Features</a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="section">
        <div class="container">
            <h2 class="section-title">ADVANCED SECURITY FEATURES</h2>
            <p class="section-subtitle">Comprehensive protection powered by AI and machine learning</p>
            
            <div class="features-grid">
                <div class="feature-card">
                    <span class="feature-icon">üéì</span>
                    <h3 class="feature-title">Cyber Awareness Trainer</h3>
                    <p class="feature-description">Interactive quiz-based learning system with 50+ questions covering phishing, UPI fraud, fake jobs, and social engineering tactics.</p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üõ°Ô∏è</span>
                    <h3 class="feature-title">Phishing Detector</h3>
                    <p class="feature-description">AI-powered analysis using VirusTotal and WHOIS APIs to detect suspicious URLs, text patterns, and phishing attempts with detailed risk scoring.</p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üö®</span>
                    <h3 class="feature-title">Incident Responder</h3>
                    <p class="feature-description">Step-by-step guidance for handling cyber incidents including phishing, malware, identity theft, and data breaches with emergency helpline access.</p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üíª</span>
                    <h3 class="feature-title">Secure Coding Mode</h3>
                    <p class="feature-description">Advanced code analysis detecting eval() usage, SQL injection, XSS patterns, weak cryptography, and hardcoded credentials with fix suggestions.</p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üí¨</span>
                    <h3 class="feature-title">Digital Counsellor</h3>
                    <p class="feature-description">Empathetic support chatbot providing emotional assistance for cyber harassment victims with integrated helpline numbers and resources.</p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üîí</span>
                    <h3 class="feature-title">SSL Certificate Checker</h3>
                    <p class="feature-description">Automatic real-time SSL verification on every page load with visual indicators and detailed certificate information including validity and encryption strength.</p>
                </div>

                <div class="feature-card">
                    <span class="feature-icon">üêõ</span>
                    <h3 class="feature-title">Malicious Code Detector</h3>
                    <p class="feature-description">ML-powered code scanning for JavaScript, Python, PHP, and more. Detects obfuscated code, suspicious API calls, and malware patterns with quarantine options.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works -->
    <section id="how-it-works" class="section">
        <div class="container">
            <h2 class="section-title">HOW IT WORKS</h2>
            <p class="section-subtitle">Three simple steps to complete digital protection</p>
            
            <div class="steps-container">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3 class="step-title">Install Extension</h3>
                    <p class="feature-description">Download and install CyberGuard from Chrome Web Store in one click. Instant activation with zero configuration required.</p>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <h3 class="step-title">Browse Protected</h3>
                    <p class="feature-description">Real-time monitoring of all websites, automatic SSL checks, and instant alerts for suspicious content or malicious sites.</p>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <h3 class="step-title">Stay Secure</h3>
                    <p class="feature-description">Access on-demand tools for phishing detection, code analysis, and cyber awareness training whenever you need protection.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="section" style="background: rgba(26, 29, 46, 0.5);">
        <div class="container">
            <h2 class="section-title">TRUSTED BY THOUSANDS</h2>
            <div class="stats-grid">
                <!-- <div class="stat-card">
                    <div class="stat-number">50K+</div>
                    <div class="stat-label">Active Users</div>
                </div> -->
                <!-- <div class="stat-card">
                    <div class="stat-number">1M+</div>
                    <div class="stat-label">Threats Blocked</div>
                </div> -->
                <!-- <div class="stat-card">
                    <div class="stat-number">99.9%</div>
                    <div class="stat-label">Detection Rate</div>
                </div> -->
                <div class="stat-card">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Protection</div>
                </div>
            </div>
        </div>
    </section>
    <!-- Chat Teaser Section -->
    <!-- <section class="section" id="chatbot" style="padding: 8rem 2rem 2rem; position: relative; z-index: 1;">
        <div class="section-title">CyberGuard Chatbot</div>
        <div class="chatbot-container">
        <div id="chat-window" class="chat-window"></div>
        <form id="chat-form" class="chat-form">
        <input type="text" id="chat-input" placeholder="Type your question..." autocomplete="off" />
        <button type="submit" id="sendBtn">Send</button>
        </form>
        </div>
    </section> -->
    <!-- Dashboard Section -->
    <section id="dashboard" class="section">
        <div class="container">
            <h2 class="section-title">SECURITY DASHBOARD</h2>
            <p class="section-subtitle">Comprehensive control center for all your security needs</p>
            
            <div class="dashboard-preview active">
                <div class="dashboard-header">
                    <div class="dashboard-title">‚ö° CyberGuard Dashboard</div>
                    <div style="color: var(--color-success); display: flex; align-items: center; gap: 0.5rem;">
                        <span style="width: 10px; height: 10px; background: var(--color-success); border-radius: 50%; animation: pulse 2s infinite;"></span>
                        Protected
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="sidebar">
                        <div class="sidebar-item active" data-feature="overview">
                            <span>üìä</span> Overview
                        </div>
                        <div class="sidebar-item" data-feature="phishing">
                            <span>üõ°Ô∏è</span> Phishing Detector
                        </div>
                        <div class="sidebar-item" data-feature="code">
                            <span>üíª</span> Code Scanner
                        </div>
                        <div class="sidebar-item" data-feature="incident">
                            <span>üö®</span> Incident Response
                        </div>
                        <div class="sidebar-item" data-feature="counsellor">
                            <span>üí¨</span> Digital Counsellor
                        </div>
                    </div>

                    <div class="dashboard-content" id="dashboardContent">
                        <h3 style="color: var(--color-cyan); margin-bottom: 1.5rem;">Security Overview</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number">142</div>
                                <div class="stat-label">Scans Today</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">7</div>
                                <div class="stat-label">Threats Blocked</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number">98%</div>
                                <div class="stat-label">Safety Score</div>
                            </div>
                        </div>
                        <p style="margin-top: 2rem; color: var(--color-text-dim);">All systems operational. Your device is protected against known threats.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Malicious Code Detector Section -->
    <section id="code-scanner" class="section" style="background: rgba(26, 29, 46, 0.5);">
        <div class="container">
            <h2 class="section-title">üîç CHECK FOR MALICIOUS CODE</h2>
            <p class="section-subtitle">Paste your code or upload a file to scan for security vulnerabilities</p>

            <div class="vscode-container">
                <div class="vscode-header">
                    <div class="vscode-tabs">
                        <div class="vscode-tab active">
                            <span style="margin-right: 0.5rem;">üìÑ</span>
                            <span>code_scanner.js</span>
                        </div>
                    </div>
                    <div class="vscode-actions">
                        <button class="vscode-btn" id="clearCodeBtn">Clear</button>
                        <button class="vscode-btn" id="uploadCodeBtn">üìÅ Upload File</button>
                    </div>
                </div>
                
                <div class="vscode-editor">
                    <div class="line-numbers" id="lineNumbers">1</div>
                    <textarea class="code-editor" id="codeEditorInput" placeholder="// Paste your code here or upload a file&#10;// Supports: JavaScript, Python, PHP, Shell, etc.&#10;&#10;function example() {&#10;    // Your code&#10;}"></textarea>
                </div>

                <div class="vscode-footer">
                    <div class="vscode-status">
                        <span>‚óè Ready</span>
                        <span style="margin-left: 1rem;">Lines: <span id="lineCount">1</span></span>
                        <span style="margin-left: 1rem;">Characters: <span id="charCount">0</span></span>
                    </div>
                    <button class="btn-scan" id="scanCodeBtn">
                        <span style="font-size: 1.2rem; margin-right: 0.5rem;">üîç</span>
                        Scan Now
                    </button>
                </div>

                <div class="scan-results" id="scanResults" style="display: none;">
                    <div class="results-header">
                        <h3 style="color: var(--color-cyan);">Scan Results</h3>
                        <span class="threat-badge" id="codeThreatBadge">CLEAN</span>
                    </div>
                    
                    <div class="results-summary">
                        <div class="summary-item">
                            <div class="summary-label">Risk Level</div>
                            <div class="summary-value" id="codeRiskLevel">Low</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Issues Found</div>
                            <div class="summary-value" id="issuesCount">0</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Lines Scanned</div>
                            <div class="summary-value" id="scannedLines">0</div>
                        </div>
                    </div>

                    <div class="issues-list" id="issuesList"></div>
                    
                    <div class="recommendations-box" id="recommendationsBox" style="display: none;">
                        <h4 style="color: var(--color-cyan); margin-bottom: 1rem;">üõ°Ô∏è Security Recommendations</h4>
                        <ul id="recommendationsList" style="list-style: none; padding: 0;"></ul>
                    </div>
                </div>
            </div>

            <input type="file" id="fileUploadInput" accept=".js,.py,.php,.sh,.txt,.sql,.java,.c,.cpp" style="display: none;">
        </div>
    </section>

    <!-- Extension Preview -->
    <section id="extension" class="section">
        <div class="container">
            <h2 class="section-title">TRY THE EXTENSION</h2>
            <p class="section-subtitle">Interactive demo of CyberGuard's powerful features</p>

            <div class="extension-simulator">
                <div class="ext-header">
                    <div class="logo" style="font-size: 1.2rem;">‚ö° CYBERGUARD</div>
                    <span style="color: var(--color-success); font-size: 0.9rem;">‚óè Protected</span>
                </div>

                <div class="ext-tabs">
                    <div class="ext-tab active" data-tab="phishing">üõ°Ô∏è Phishing</div>
                    <div class="ext-tab" data-tab="code">üíª Code</div>
                    <div class="ext-tab" data-tab="help">üí¨ Help</div>
                </div>

                <div class="ext-content">
                    <!-- Phishing Detector -->
                    <div class="ext-feature active" id="ext-phishing">
                        <h3 style="color: var(--color-cyan); margin-bottom: 1rem;">Phishing Detector</h3>
                        <textarea class="input-field" id="phishingInput" placeholder="Paste suspicious URL or text here...&#10;&#10;Example:&#10;http://paypa1-security.com/verify&#10;URGENT: Your account will be suspended!"></textarea>
                        <button class="btn-analyze" id="analyzePhishing">üîç Analyze Threat</button>
                        <div class="result-box" id="phishingResult">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h4 style="color: var(--color-cyan);">Analysis Result</h4>
                                <span id="threatBadge" style="padding: 0.3rem 1rem; background: rgba(255, 68, 68, 0.2); color: var(--color-danger); border-radius: 20px; font-weight: 700; font-size: 0.9rem;">HIGH RISK</span>
                            </div>
                            <div style="text-align: center; margin-bottom: 1.5rem;">
                                <div style="font-size: 3rem; font-weight: 900; color: var(--color-danger);" id="riskScore">85</div>
                                <div style="color: var(--color-text-dim); font-size: 0.9rem;">Risk Score</div>
                            </div>
                            <div id="findings"></div>
                        </div>
                    </div>

                    <!-- Code Scanner -->
                    <div class="ext-feature" id="ext-code">
                        <h3 style="color: var(--color-cyan); margin-bottom: 1rem;">Code Scanner</h3>
                        <textarea class="input-field" placeholder="Paste code to scan for vulnerabilities...&#10;&#10;Example:&#10;eval(userInput);&#10;password = 'admin123';" style="min-height: 150px;"></textarea>
                        <button class="btn-analyze">üîç Scan Code</button>
                        <div style="margin-top: 1rem; padding: 1rem; background: var(--color-bg-dark); border-radius: 10px; font-size: 0.9rem;">
                            <div style="color: var(--color-text-dim);">Supported: JavaScript, Python, PHP, SQL</div>
                            <div style="color: var(--color-text-dim); margin-top: 0.5rem;">Detects: Injection, XSS, weak crypto, hardcoded secrets</div>
                        </div>
                    </div>

                    <!-- Counsellor -->
                    <div class="ext-feature" id="ext-help">
                        <h3 style="color: var(--color-cyan); margin-bottom: 1rem;">Emergency Helplines</h3>
                        <div class="helpline-list">
                            <div class="helpline-item">
                                <span class="helpline-icon">üìû</span>
                                <div>
                                    <div style="font-weight: 600;">Cyber Crime Helpline</div>
                                    <div class="helpline-number">1930</div>
                                </div>
                            </div>
                            <div class="helpline-item">
                                <span class="helpline-icon">üë©</span>
                                <div>
                                    <div style="font-weight: 600;">Women Helpline</div>
                                    <div class="helpline-number">181</div>
                                </div>
                            </div>
                            <div class="helpline-item">
                                <span class="helpline-icon">üß†</span>
                                <div>
                                    <div style="font-weight: 600;">Mental Health (NIMHANS)</div>
                                    <div class="helpline-number">080-46110007</div>
                                </div>
                            </div>
                        </div>
                        <a href="https://cybercrime.gov.in/" target="_blank" rel="noopener noreferrer">
                            <button class="btn-analyze" style="margin-top: 1rem; background: linear-gradient(135deg, var(--color-danger), var(--color-warning));">üö® Report Cyber Crime</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="logo" style="font-size: 2rem; margin-bottom: 1rem;">‚ö° CYBERGUARD</div>
            <p style="color: var(--color-text-dim); margin-bottom: 1.5rem;">Advanced Cybersecurity Suite for Complete Digital Protection</p>
            <div class="social-links">
                <a href="#" class="social-link">üìß</a>
                <a href="#" class="social-link">üê¶</a>
                <a href="#" class="social-link">üíº</a>
                <a href="#" class="social-link">üì±</a>
            </div>
            <p style="margin-top: 2rem; color: var(--color-text-dim); font-size: 0.9rem;">¬© 2025 CyberGuard. All rights reserved.</p>
        </div>
    </footer>

    <!-- Download Modal -->
    <div class="modal" id="downloadModal">
        <div class="modal-content">
            <span class="modal-close" id="closeModal">&times;</span>
            <h2 style="color: var(--color-cyan); margin-bottom: 1rem;">Download CyberGuard Extension</h2>
            <p style="margin-bottom: 2rem; color: var(--color-text-dim);">Install the complete Chrome extension with all 7 security features</p>
            
            <div style="background: rgba(0, 243, 255, 0.1); padding: 2rem; border-radius: 15px; border: 1px solid rgba(0, 243, 255, 0.3); margin-bottom: 2rem;">
                <h3 style="color: var(--color-cyan); margin-bottom: 1rem;">Installation Instructions</h3>
                <ol style="text-align: left; color: var(--color-text-dim); line-height: 2;">
                    <li>Download the extension ZIP file</li>
                    <li>Extract to a folder on your computer</li>
                    <li>Open Chrome ‚Üí Settings ‚Üí Extensions</li>
                    <li>Enable "Developer mode" (top right)</li>
                    <li>Click "Load unpacked" and select the extension folder</li>
                    <li>CyberGuard icon will appear in your toolbar</li>
                </ol>
            </div>

            <button class="btn-primary" onclick="alert('Extension files can be downloaded from the Chrome Web Store or built locally using the provided manifest.json and source files.')">Download Extension Package</button>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--color-text-dim);">Chrome Web Store listing coming soon</p>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
    const codeEditor = document.getElementById("codeEditorInput");
    const scanBtn = document.getElementById("scanCodeBtn");
    const clearBtn = document.getElementById("clearCodeBtn");
    const fileUploadBtn = document.getElementById("uploadCodeBtn");
    const fileInput = document.getElementById("fileUploadInput");

    const scanResults = document.getElementById("scanResults");
    const threatBadge = document.getElementById("codeThreatBadge");
    const riskLevel = document.getElementById("codeRiskLevel");
    const issuesCount = document.getElementById("issuesCount");
    const scannedLines = document.getElementById("scannedLines");
    const issuesList = document.getElementById("issuesList");
    const recommendationsBox = document.getElementById("recommendationsBox");
    const recommendationsList = document.getElementById("recommendationsList");

    // Update line & character counters
    codeEditor.addEventListener("input", () => {
        const lines = codeEditor.value.split("\n").length;
        const chars = codeEditor.value.length;
        document.getElementById("lineNumbers").innerText = Array.from({ length: lines }, (_, i) => i + 1).join("\n");
        document.getElementById("lineCount").textContent = lines;
        document.getElementById("charCount").textContent = chars;
    });

    // Clear editor
    clearBtn.addEventListener("click", () => {
        codeEditor.value = "";
        issuesList.innerHTML = "";
        scanResults.style.display = "none";
        document.getElementById("lineNumbers").innerText = "1";
        document.getElementById("lineCount").textContent = "1";
        document.getElementById("charCount").textContent = "0";
    });

    // File upload
    fileUploadBtn.addEventListener("click", () => fileInput.click());
    fileInput.addEventListener("change", (event) => {
        const file = event.target.files[0];
        if (!file) return;
        const reader = new FileReader();
        reader.onload = e => {
            codeEditor.value = e.target.result;
            codeEditor.dispatchEvent(new Event("input"));
        };
        reader.readAsText(file);
    });

    // üîç Main scan logic
    scanBtn.addEventListener("click", async () => {
        const code = codeEditor.value.trim();
        if (!code) {
            alert("Please paste or upload some code first!");
            return;
        }

        scanBtn.disabled = true;
        scanBtn.textContent = "Scanning...";
        threatBadge.textContent = "SCANNING...";
        threatBadge.style.background = "orange";
        scanResults.style.display = "block";

        try {
            const response = await fetch("/scan", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ code: code, lang: "python" })
            });

            const data = await response.json();

            // Reset UI
            issuesList.innerHTML = "";
            recommendationsList.innerHTML = "";
            recommendationsBox.style.display = "none";

            if (data.error) {
                threatBadge.textContent = "ERROR";
                threatBadge.style.background = "red";
                issuesList.innerHTML = `<p style="color: red;">${data.error}</p>`;
                return;
            }

            const issues = data.issues || [];
            const lines = code.split("\n").length;
            scannedLines.textContent = lines;
            issuesCount.textContent = issues.length;

            if (issues.length === 0 || (issues.length === 1 && issues[0].message?.includes("No vulnerabilities"))) {
                threatBadge.textContent = "CLEAN";
                threatBadge.style.background = "green";
                riskLevel.textContent = "Low";
                issuesList.innerHTML = `<p style="color: lightgreen;">No vulnerabilities found ‚úÖ</p>`;
            } else {
                let high = 0, medium = 0;
                issues.forEach(issue => {
                    const sev = (issue.severity || "LOW").toUpperCase();
                    if (sev === "HIGH") high++;
                    if (sev === "MEDIUM") medium++;

                    const color = sev === "HIGH" ? "red" : sev === "MEDIUM" ? "orange" : "yellow";
                    const msg = issue.issue || issue.message || "Potential issue detected";

                    const issueHTML = `
                        <div class="issue-item" style="border-left: 4px solid ${color}; padding: 0.5rem 1rem; margin: 0.5rem 0;">
                            <div><strong style="color:${color};">${sev}</strong> ‚Äî ${msg}</div>
                            ${issue.line ? `<div style="color:gray;">Line: ${issue.line}</div>` : ""}
                            ${issue.tool ? `<div style="font-size:0.9rem; color:#aaa;">Tool: ${issue.tool}</div>` : ""}
                        </div>
                    `;
                    issuesList.innerHTML += issueHTML;
                });

                if (high > 0) {
                    riskLevel.textContent = "High";
                    threatBadge.textContent = "‚ö†Ô∏è HIGH RISK";
                    threatBadge.style.background = "red";
                } else if (medium > 0) {
                    riskLevel.textContent = "Medium";
                    threatBadge.textContent = "‚ö†Ô∏è MEDIUM RISK";
                    threatBadge.style.background = "orange";
                } else {
                    riskLevel.textContent = "Low";
                    threatBadge.textContent = "LOW RISK";
                    threatBadge.style.background = "yellow";
                }

                // Add generic recommendations
                recommendationsBox.style.display = "block";
                const recs = [
                    "Avoid using system calls like os.system() or eval()",
                    "Always validate and sanitize user inputs",
                    "Keep dependencies updated to latest secure versions",
                    "Avoid hardcoding credentials or tokens in code",
                    "Use parameterized queries for database interactions"
                ];
                recs.forEach(r => {
                    const li = document.createElement("li");
                    li.textContent = r;
                    recommendationsList.appendChild(li);
                });
            }

        } catch (err) {
            console.error(err);
            issuesList.innerHTML = `<p style="color: red;">Error: ${err.message}</p>`;
        } finally {
            scanBtn.disabled = false;
            scanBtn.textContent = "Scan Now";
        }
    });
});
        // Create animated particles
        function createParticles() {
            const bg = document.querySelector('.cyber-bg');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                bg.appendChild(particle);
            }
        }
        createParticles();

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Dashboard sidebar navigation
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                const feature = this.getAttribute('data-feature');
                const content = document.getElementById('dashboardContent');
                
                const features = {
                    overview: '<h3 style="color: var(--color-cyan); margin-bottom: 1.5rem;">Security Overview</h3><div class="stats-grid"><div class="stat-card"><div class="stat-number">142</div><div class="stat-label">Scans Today</div></div><div class="stat-card"><div class="stat-number">7</div><div class="stat-label">Threats Blocked</div></div><div class="stat-card"><div class="stat-number">98%</div><div class="stat-label">Safety Score</div></div></div><p style="margin-top: 2rem; color: var(--color-text-dim);">All systems operational. Your device is protected against known threats.</p>',
                    phishing: '<h3 style="color: var(--color-cyan); margin-bottom: 1.5rem;">Phishing Detector</h3><p style="color: var(--color-text-dim); margin-bottom: 1rem;">Analyze suspicious URLs and messages for phishing attempts.</p><textarea class="input-field" id="dashboardPhishingInput" placeholder="Paste URL or text to analyze..." style="margin-bottom: 1rem;"></textarea><button class="btn-primary" id="dashboardAnalyzeBtn">üîç Analyze Now</button><div id="dashboardPhishingResult" style="display: none; margin-top: 1.5rem; padding: 1.5rem; background: rgba(0, 243, 255, 0.1); border: 1px solid var(--color-cyan); border-radius: 10px;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;"><h4 style="color: var(--color-cyan);">Analysis Result</h4><span id="dashboardThreatBadge" style="padding: 0.3rem 1rem; background: rgba(255, 68, 68, 0.2); color: var(--color-danger); border-radius: 20px; font-weight: 700; font-size: 0.9rem;">HIGH RISK</span></div><div style="text-align: center; margin-bottom: 1rem;"><div style="font-size: 2.5rem; font-weight: 900;" id="dashboardRiskScore">0</div><div style="color: var(--color-text-dim); font-size: 0.9rem;">Risk Score</div></div><div id="dashboardFindings"></div></div>',
                    code: '<h3 style="color: var(--color-cyan); margin-bottom: 1.5rem;">Code Security Scanner</h3><p style="color: var(--color-text-dim); margin-bottom: 1rem;">Detect vulnerabilities in your code before deployment.</p><textarea class="input-field" id="dashboardCodeInput" placeholder="Paste code to scan..." style="margin-bottom: 1rem; min-height: 200px; font-family: monospace;"></textarea><button class="btn-primary" id="dashboardScanCodeBtn">üîç Scan Code</button><div id="dashboardCodeResult" style="display: none; margin-top: 1.5rem; padding: 1.5rem; background: rgba(0, 243, 255, 0.1); border: 1px solid var(--color-cyan); border-radius: 10px;"><div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;"><h4 style="color: var(--color-cyan);">Scan Results</h4><span id="dashboardCodeBadge" style="padding: 0.3rem 1rem; border-radius: 20px; font-weight: 700; font-size: 0.9rem;">CLEAN</span></div><div style="text-align: center; margin-bottom: 1rem;"><div style="font-size: 2.5rem; font-weight: 900;" id="dashboardCodeRisk">Low</div><div style="color: var(--color-text-dim); font-size: 0.9rem;">Risk Level</div></div><div id="dashboardCodeIssues"></div></div>',
                    incident: '<h3 style="color: var(--color-cyan); margin-bottom: 1.5rem;">Incident Response Center</h3><p style="color: var(--color-text-dim); margin-bottom: 1.5rem;">Get immediate guidance for security incidents.</p><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;"><div style="padding: 1.5rem; background: rgba(0, 243, 255, 0.1); border: 1px solid var(--color-cyan); border-radius: 15px; cursor: pointer; text-align: center;"><div style="font-size: 2rem; margin-bottom: 0.5rem;">üé£</div><div>Phishing Attack</div></div><div style="padding: 1.5rem; background: rgba(0, 243, 255, 0.1); border: 1px solid var(--color-cyan); border-radius: 15px; cursor: pointer; text-align: center;"><div style="font-size: 2rem; margin-bottom: 0.5rem;">ü¶†</div><div>Malware Infection</div></div><div style="padding: 1.5rem; background: rgba(0, 243, 255, 0.1); border: 1px solid var(--color-cyan); border-radius: 15px; cursor: pointer; text-align: center;"><div style="font-size: 2rem; margin-bottom: 0.5rem;">üí≥</div><div>Financial Fraud</div></div><div style="padding: 1.5rem; background: rgba(0, 243, 255, 0.1); border: 1px solid var(--color-cyan); border-radius: 15px; cursor: pointer; text-align: center;"><div style="font-size: 2rem; margin-bottom: 0.5rem;">üîì</div><div>Data Breach</div></div></div>',
                    counsellor: '<h3 style="color: var(--color-cyan); margin-bottom: 1.5rem;">Digital Counsellor</h3><p style="color: var(--color-text-dim); margin-bottom: 1.5rem;">Get emotional support and access helpline resources.</p><div class="helpline-list"><div class="helpline-item"><span style="font-size: 2rem;">üìû</span><div><div style="font-weight: 600;">Cyber Crime Helpline</div><div style="font-size: 1.5rem; font-weight: 700; color: var(--color-cyan);">1930</div></div></div><div class="helpline-item"><span style="font-size: 2rem;">üë©</span><div><div style="font-weight: 600;">Women Helpline</div><div style="font-size: 1.5rem; font-weight: 700; color: var(--color-cyan);">181</div></div></div><div class="helpline-item"><span style="font-size: 2rem;">üß†</span><div><div style="font-weight: 600;">Mental Health (NIMHANS)</div><div style="font-size: 1.5rem; font-weight: 700; color: var(--color-cyan);">080-46110007</div></div></div></div><a href="https://cybercrime.gov.in" target="_blank" rel="noopener noreferrer" style="display: block; margin-top: 2rem;"><button class="btn-primary" style="width: 100%; background: linear-gradient(135deg, var(--color-danger), var(--color-warning));">üö® Report Cyber Crime</button></a>'
                };
                
                content.innerHTML = features[feature] || features.overview;
                
                // Attach event listeners after content is loaded
                if (feature === 'phishing') {
                    attachDashboardPhishingListeners();
                } else if (feature === 'code') {
                    attachDashboardCodeListeners();
                } else if (feature === 'counsellor') {
                    attachChatListeners();
                }
            });
        });

        // Dashboard Phishing Detector
        function attachDashboardPhishingListeners() {
            const analyzeBtn = document.getElementById('dashboardAnalyzeBtn');
            const input = document.getElementById('dashboardPhishingInput');
            
            if (analyzeBtn && input) {
                analyzeBtn.addEventListener('click', function() {
                    const text = input.value.trim();
                    
                    if (!text) {
                        alert('Please enter a URL or text to analyze');
                        return;
                    }
                    
                    analyzeBtn.innerHTML = '<span class="loading"></span> Analyzing...';
                    analyzeBtn.disabled = true;
                    
                    setTimeout(() => {
                        const result = analyzePhishingThreat(text);
                        displayDashboardPhishingResult(result);
                        analyzeBtn.innerHTML = 'üîç Analyze Now';
                        analyzeBtn.disabled = false;
                    }, 1500);
                });
            }
        }

        function displayDashboardPhishingResult(result) {
            const resultDiv = document.getElementById('dashboardPhishingResult');
            const badge = document.getElementById('dashboardThreatBadge');
            const scoreDiv = document.getElementById('dashboardRiskScore');
            const findingsDiv = document.getElementById('dashboardFindings');
            
            scoreDiv.textContent = result.riskScore;
            
            if (result.riskScore >= 70) {
                badge.textContent = 'HIGH RISK';
                badge.style.background = 'rgba(255, 68, 68, 0.2)';
                badge.style.color = 'var(--color-danger)';
                scoreDiv.style.color = 'var(--color-danger)';
            } else if (result.riskScore >= 40) {
                badge.textContent = 'MODERATE';
                badge.style.background = 'rgba(255, 170, 0, 0.2)';
                badge.style.color = 'var(--color-warning)';
                scoreDiv.style.color = 'var(--color-warning)';
            } else {
                badge.textContent = 'LOW RISK';
                badge.style.background = 'rgba(0, 255, 136, 0.2)';
                badge.style.color = 'var(--color-success)';
                scoreDiv.style.color = 'var(--color-success)';
            }
            
            const issuesHtml = result.issues.length > 0 
                ? '<h4 style="color: var(--color-cyan); margin: 1rem 0 0.5rem;">Detected Issues:</h4><ul style="list-style: none; padding: 0;">' + 
                  result.issues.map(i => '<li style="padding: 0.5rem; margin-bottom: 0.5rem; background: rgba(0, 0, 0, 0.3); border-left: 3px solid var(--color-cyan); border-radius: 5px; font-size: 0.9rem;">' + i + '</li>').join('') + '</ul>'
                : '<p style="color: var(--color-success); margin-top: 1rem;">‚úÖ No obvious threats detected. Always verify sender identity.</p>';
            
            findingsDiv.innerHTML = issuesHtml;
            resultDiv.style.display = 'block';
        }

        // Dashboard Code Scanner
        function attachDashboardCodeListeners() {
            const scanBtn = document.getElementById('dashboardScanCodeBtn');
            const input = document.getElementById('dashboardCodeInput');
            
            if (scanBtn && input) {
                scanBtn.addEventListener('click', function() {
                    const code = input.value.trim();
                    
                    if (!code) {
                        alert('Please enter code to scan');
                        return;
                    }
                    
                    scanBtn.innerHTML = '<span class="loading"></span> Scanning...';
                    scanBtn.disabled = true;
                    
                    setTimeout(() => {
                        const result = scanMaliciousCode(code);
                        displayDashboardCodeResult(result);
                        scanBtn.innerHTML = 'üîç Scan Code';
                        scanBtn.disabled = false;
                    }, 1500);
                });
            }
        }

        function displayDashboardCodeResult(result) {
            const resultDiv = document.getElementById('dashboardCodeResult');
            const badge = document.getElementById('dashboardCodeBadge');
            const riskDiv = document.getElementById('dashboardCodeRisk');
            const issuesDiv = document.getElementById('dashboardCodeIssues');
            
            riskDiv.textContent = result.riskLevel;
            
            if (result.totalRisk > 60) {
                badge.textContent = 'MALICIOUS';
                badge.style.background = 'rgba(255, 68, 68, 0.2)';
                badge.style.color = 'var(--color-danger)';
                riskDiv.style.color = 'var(--color-danger)';
            } else if (result.totalRisk > 30) {
                badge.textContent = 'SUSPICIOUS';
                badge.style.background = 'rgba(255, 170, 0, 0.2)';
                badge.style.color = 'var(--color-warning)';
                riskDiv.style.color = 'var(--color-warning)';
            } else if (result.totalRisk > 0) {
                badge.textContent = 'WARNING';
                badge.style.background = 'rgba(255, 170, 0, 0.2)';
                badge.style.color = 'var(--color-warning)';
                riskDiv.style.color = 'var(--color-warning)';
            } else {
                badge.textContent = 'CLEAN';
                badge.style.background = 'rgba(0, 255, 136, 0.2)';
                badge.style.color = 'var(--color-success)';
                riskDiv.style.color = 'var(--color-success)';
            }
            
            if (result.issues.length > 0) {
                issuesDiv.innerHTML = '<h4 style="color: var(--color-cyan); margin: 1rem 0 0.5rem;">Found ' + result.issues.length + ' Issues:</h4>' +
                    result.issues.map(issue => `
                        <div style="padding: 1rem; margin-bottom: 0.8rem; background: rgba(0, 0, 0, 0.3); border-left: 3px solid ${getSeverityColor(issue.severity)}; border-radius: 5px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <strong style="color: var(--color-cyan);">${issue.name}</strong>
                                <span style="padding: 0.2rem 0.6rem; background: ${getSeverityColor(issue.severity)}; border-radius: 10px; font-size: 0.75rem; font-weight: 700;">${issue.severity}</span>
                            </div>
                            <p style="color: var(--color-text-dim); font-size: 0.9rem; margin: 0.5rem 0;">${issue.description}</p>
                            <code style="display: block; background: #000; padding: 0.5rem; border-radius: 5px; font-size: 0.85rem; margin-top: 0.5rem; color: #ff6b6b;">Line ${issue.line}: ${escapeHtml(issue.code)}</code>
                        </div>
                    `).join('');
            } else {
                issuesDiv.innerHTML = '<p style="color: var(--color-success); margin-top: 1rem;">‚úÖ No vulnerabilities detected. Your code appears safe.</p>';
            }
            
            resultDiv.style.display = 'block';
        }

        // Extension tabs
        document.querySelectorAll('.ext-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.ext-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.ext-feature').forEach(f => f.classList.remove('active'));
                
                this.classList.add('active');
                const tabName = this.getAttribute('data-tab');
                document.getElementById('ext-' + tabName).classList.add('active');
            });
        });

        // Phishing analysis demo - FIXED
        document.getElementById('analyzePhishing').addEventListener('click', function() {
            const input = document.getElementById('phishingInput').value;
            const resultBox = document.getElementById('phishingResult');
            const button = this;
            
            if (!input.trim()) {
                alert('Please enter a URL or text to analyze');
                return;
            }

            button.innerHTML = '<span class="loading"></span> Analyzing...';
            button.disabled = true;

            setTimeout(() => {
                const result = analyzePhishingThreat(input);
                
                document.getElementById('riskScore').textContent = result.riskScore;
                const badge = document.getElementById('threatBadge');
                
                if (result.riskScore >= 70) {
                    badge.textContent = 'HIGH RISK';
                    badge.style.background = 'rgba(255, 68, 68, 0.2)';
                    badge.style.color = 'var(--color-danger)';
                    document.getElementById('riskScore').style.color = 'var(--color-danger)';
                } else if (result.riskScore >= 40) {
                    badge.textContent = 'MODERATE';
                    badge.style.background = 'rgba(255, 170, 0, 0.2)';
                    badge.style.color = 'var(--color-warning)';
                    document.getElementById('riskScore').style.color = 'var(--color-warning)';
                } else {
                    badge.textContent = 'LOW RISK';
                    badge.style.background = 'rgba(0, 255, 136, 0.2)';
                    badge.style.color = 'var(--color-success)';
                    document.getElementById('riskScore').style.color = 'var(--color-success)';
                }

                const findingsHtml = result.issues.length > 0 
                    ? '<h4 style="color: var(--color-cyan); margin-bottom: 0.5rem;">Detected Issues:</h4><ul style="list-style: none; padding: 0;">' + result.issues.map(i => '<li style="padding: 0.5rem; margin-bottom: 0.5rem; background: rgba(0, 0, 0, 0.3); border-left: 3px solid var(--color-cyan); border-radius: 5px;">' + i + '</li>').join('') + '</ul>'
                    : '<h4 style="color: var(--color-success);">‚úÖ No obvious threats detected</h4><p style="color: var(--color-text-dim); margin-top: 0.5rem;">However, always verify sender identity and avoid sharing sensitive information.</p>';

                document.getElementById('findings').innerHTML = findingsHtml;
                resultBox.classList.add('show');
                
                button.innerHTML = 'üîç Analyze Threat';
                button.disabled = false;
            }, 1500);
        });

        // Enhanced phishing detection function
        function analyzePhishingThreat(input) {
            let riskScore = 0;
            const issues = [];
            const inputLower = input.toLowerCase();
            
            // URL analysis
            const urlPattern = /(https?:\/\/[^\s]+)/gi;
            const urls = input.match(urlPattern) || [];
            
            urls.forEach(url => {
                const urlLower = url.toLowerCase();
                
                // HTTP check
                if (urlLower.startsWith('http://')) {
                    riskScore += 20;
                    issues.push('‚ùå Insecure HTTP protocol (should use HTTPS)');
                }
                
                // Typosquatting
                const typoSquatting = [
                    { pattern: /paypa1|paypa-|paypai|paypol/i, brand: 'PayPal' },
                    { pattern: /amaz0n|arnazon|amazom/i, brand: 'Amazon' },
                    { pattern: /micros0ft|rnicrosoft/i, brand: 'Microsoft' },
                    { pattern: /g00gle|googie|gooogle/i, brand: 'Google' },
                    { pattern: /faceb00k|facebok/i, brand: 'Facebook' },
                    { pattern: /app1e|appl-|appie/i, brand: 'Apple' }
                ];
                
                typoSquatting.forEach(({ pattern, brand }) => {
                    if (pattern.test(urlLower)) {
                        riskScore += 35;
                        issues.push(`üö® Typosquatting: Fake ${brand} domain detected`);
                    }
                });
                
                // IP address instead of domain
                if (/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/.test(url)) {
                    riskScore += 25;
                    issues.push('‚ö†Ô∏è IP address used instead of domain name');
                }
                
                // Suspicious TLDs
                const suspiciousTLDs = ['.tk', '.ml', '.ga', '.cf', '.gq', '.xyz', '.top', '.work'];
                suspiciousTLDs.forEach(tld => {
                    if (urlLower.includes(tld)) {
                        riskScore += 15;
                        issues.push(`‚ö†Ô∏è Suspicious domain extension: ${tld}`);
                    }
                });
                
                // Excessive subdomains
                try {
                    const hostname = new URL(url).hostname;
                    const parts = hostname.split('.');
                    if (parts.length > 4) {
                        riskScore += 20;
                        issues.push('‚ö†Ô∏è Excessive subdomains detected');
                    }
                } catch (e) {}
                
                // URL shorteners
                const shorteners = ['bit.ly', 'tinyurl', 'goo.gl', 't.co', 'ow.ly', 'short.link'];
                if (shorteners.some(s => urlLower.includes(s))) {
                    riskScore += 12;
                    issues.push('‚ö†Ô∏è URL shortener - verify actual destination');
                }
            });
            
            // Text pattern analysis
            const urgencyKeywords = ['urgent', 'immediately', 'act now', 'verify account', 'suspended', 'locked', 'expire', 'limited time', 'within 24 hours', 'act fast'];
            urgencyKeywords.forEach(keyword => {
                if (inputLower.includes(keyword)) {
                    riskScore += 8;
                    issues.push(`‚ö†Ô∏è Urgency tactic: "${keyword}"`);
                }
            });
            
            // Financial/payment requests
            const moneyKeywords = ['send money', 'wire transfer', 'payment required', 'prize', 'you won', 'claim now', 'refund', 'tax refund', 'inheritance'];
            moneyKeywords.forEach(keyword => {
                if (inputLower.includes(keyword)) {
                    riskScore += 15;
                    issues.push(`üö® Financial request: "${keyword}"`);
                }
            });
            
            // Credential requests
            const credentialKeywords = ['password', 'pin', 'otp', 'cvv', 'card number', 'social security', 'ssn', 'confirm identity', 'verify credentials'];
            credentialKeywords.forEach(keyword => {
                if (inputLower.includes(keyword)) {
                    riskScore += 20;
                    issues.push(`üö® Credential request: "${keyword}"`);
                }
            });
            
            // Poor grammar indicators
            const grammarMistakes = ['dear customer', 'dear user', 'kindly', 'do the needful', 'revert back', 'please do not ignore'];
            grammarMistakes.forEach(mistake => {
                if (inputLower.includes(mistake)) {
                    riskScore += 8;
                    issues.push(`‚ö†Ô∏è Suspicious phrasing: "${mistake}"`);
                }
            });
            
            // Obfuscated links (hidden text)
            if (/<a[^>]*href=["'][^"']*["'][^>]*>(?!https?:\/\/)([^<]+)<\/a>/i.test(input)) {
                riskScore += 18;
                issues.push('‚ö†Ô∏è Hidden link text detected');
            }
            
            // Cap at 100
            riskScore = Math.min(riskScore, 100);
            
            return { riskScore, issues };
        }

        // Malicious code scanner
        document.getElementById('scanCodeBtn').addEventListener('click', function() {
            const code = document.getElementById('codeEditorInput').value;
            
            if (!code.trim()) {
                alert('Please enter code to scan');
                return;
            }
            
            const button = this;
            button.innerHTML = '<span class="loading"></span> Scanning...';
            button.disabled = true;
            
            setTimeout(() => {
                const result = scanMaliciousCode(code);
                displayScanResults(result);
                button.innerHTML = '<span style="font-size: 1.2rem; margin-right: 0.5rem;">üîç</span> Scan Now';
                button.disabled = false;
            }, 2000);
        });

        function scanMaliciousCode(code) {
            const issues = [];
            let totalRisk = 0;
            
            // Suspicious patterns with severity
            const patterns = [
                { regex: /eval\s*\(/gi, name: 'eval() usage', severity: 'CRITICAL', risk: 30, desc: 'Dynamic code execution can execute malicious code' },
                { regex: /exec\s*\(/gi, name: 'exec() usage', severity: 'CRITICAL', risk: 30, desc: 'Direct command execution vulnerability' },
                { regex: /subprocess\.Popen|os\.system|shell_exec/gi, name: 'System command execution', severity: 'CRITICAL', risk: 35, desc: 'Allows execution of system commands' },
                { regex: /base64\.b64decode|atob\s*\(/gi, name: 'Base64 decoding', severity: 'HIGH', risk: 20, desc: 'Often used to hide malicious code' },
                { regex: /socket\.socket|new\s+Socket\(/gi, name: 'Socket creation', severity: 'HIGH', risk: 25, desc: 'Network connection capability detected' },
                { regex: /CreateRemoteThread|VirtualAlloc/gi, name: 'Memory manipulation', severity: 'CRITICAL', risk: 40, desc: 'Low-level memory operations detected' },
                { regex: /document\.write|innerHTML\s*=/gi, name: 'DOM manipulation', severity: 'MEDIUM', risk: 15, desc: 'Potential XSS vulnerability' },
                { regex: /XMLHttpRequest|fetch\s*\(/gi, name: 'HTTP requests', severity: 'MEDIUM', risk: 12, desc: 'External data retrieval detected' },
                { regex: /(password|apikey|secret)\s*=\s*["'][^"']+["']/gi, name: 'Hardcoded credentials', severity: 'HIGH', risk: 25, desc: 'Sensitive data exposed in code' },
                { regex: /rm\s+-rf|del\s+\/[fqs]/gi, name: 'File deletion commands', severity: 'CRITICAL', risk: 35, desc: 'Destructive file operations' },
                { regex: /SELECT.*FROM.*WHERE|DROP\s+TABLE|DELETE\s+FROM/gi, name: 'SQL queries', severity: 'MEDIUM', risk: 15, desc: 'Direct SQL queries may be vulnerable to injection' },
                { regex: /__import__|importlib\.import_module/gi, name: 'Dynamic imports', severity: 'HIGH', risk: 20, desc: 'Dynamic module loading detected' }
            ];
            
            patterns.forEach(({ regex, name, severity, risk, desc }) => {
                const matches = code.match(regex);
                if (matches) {
                    totalRisk += risk;
                    matches.forEach(match => {
                        issues.push({
                            name,
                            severity,
                            description: desc,
                            code: match,
                            line: getLineNumber(code, match)
                        });
                    });
                }
            });
            
            const linesScanned = code.split('\n').length;
            const riskLevel = totalRisk > 60 ? 'Critical' : totalRisk > 30 ? 'High' : totalRisk > 15 ? 'Medium' : 'Low';
            
            return {
                issues,
                totalRisk: Math.min(totalRisk, 100),
                linesScanned,
                riskLevel
            };
        }

        function getLineNumber(code, pattern) {
            const lines = code.split('\n');
            for (let i = 0; i < lines.length; i++) {
                if (lines[i].includes(pattern)) {
                    return i + 1;
                }
            }
            return 1;
        }

        function displayScanResults(result) {
            const resultsDiv = document.getElementById('scanResults');
            const badge = document.getElementById('codeThreatBadge');
            const riskLevelDiv = document.getElementById('codeRiskLevel');
            const issuesCountDiv = document.getElementById('issuesCount');
            const scannedLinesDiv = document.getElementById('scannedLines');
            const issuesList = document.getElementById('issuesList');
            const recommendationsBox = document.getElementById('recommendationsBox');
            const recommendationsList = document.getElementById('recommendationsList');
            
            // Update badge
            if (result.totalRisk > 60) {
                badge.textContent = 'MALICIOUS';
                badge.className = 'threat-badge danger';
            } else if (result.totalRisk > 30) {
                badge.textContent = 'SUSPICIOUS';
                badge.className = 'threat-badge warning';
            } else if (result.totalRisk > 0) {
                badge.textContent = 'WARNING';
                badge.className = 'threat-badge warning';
            } else {
                badge.textContent = 'CLEAN';
                badge.className = 'threat-badge clean';
            }
            
            // Update summary
            riskLevelDiv.textContent = result.riskLevel;
            riskLevelDiv.style.color = result.totalRisk > 60 ? 'var(--color-danger)' : result.totalRisk > 30 ? 'var(--color-warning)' : 'var(--color-success)';
            issuesCountDiv.textContent = result.issues.length;
            scannedLinesDiv.textContent = result.linesScanned;
            
            // Display issues
            if (result.issues.length > 0) {
                issuesList.innerHTML = '<h4 style="color: var(--color-cyan); margin-bottom: 1rem;">‚ö†Ô∏è Detected Vulnerabilities</h4>' +
                    result.issues.map(issue => `
                        <div class="issue-item ${issue.severity.toLowerCase()}">
                            <div class="issue-header">
                                <div class="issue-title">${issue.name}</div>
                                <span class="issue-severity" style="background: ${getSeverityColor(issue.severity)};">${issue.severity}</span>
                            </div>
                            <div class="issue-description">${issue.description}</div>
                            <div class="issue-code">Line ${issue.line}: <span style="color: #ff6b6b;">${escapeHtml(issue.code)}</span></div>
                        </div>
                    `).join('');
                
                // Show recommendations
                const recommendations = [
                    'Avoid using eval() or exec() - use safer alternatives',
                    'Never hardcode sensitive credentials in source code',
                    'Validate and sanitize all user inputs',
                    'Use parameterized queries for database operations',
                    'Implement proper access controls and permissions',
                    'Keep all dependencies and libraries up to date'
                ];
                
                recommendationsList.innerHTML = recommendations.map(rec => `<li>${rec}</li>`).join('');
                recommendationsBox.style.display = 'block';
            } else {
                issuesList.innerHTML = '<div style="text-align: center; padding: 2rem; color: var(--color-success);"><h3>‚úÖ No vulnerabilities detected</h3><p style="color: var(--color-text-dim); margin-top: 1rem;">Your code appears to be safe from common security threats.</p></div>';
                recommendationsBox.style.display = 'none';
            }
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function getSeverityColor(severity) {
            const colors = {
                'CRITICAL': 'rgba(255, 68, 68, 0.8)',
                'HIGH': 'rgba(255, 170, 0, 0.8)',
                'MEDIUM': 'rgba(255, 200, 0, 0.8)',
                'LOW': 'rgba(0, 243, 255, 0.8)'
            };
            return colors[severity] || colors.LOW;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Code editor line numbers
        const codeEditor = document.getElementById('codeEditorInput');
        const lineNumbers = document.getElementById('lineNumbers');
        const lineCount = document.getElementById('lineCount');
        const charCount = document.getElementById('charCount');

        codeEditor.addEventListener('input', function() {
            updateLineNumbers();
            updateStats();
        });

        codeEditor.addEventListener('scroll', function() {
            lineNumbers.scrollTop = this.scrollTop;
        });

        // Digital Counsellor - No chat system needed, button redirects to cybercrime.gov.in
        function attachChatListeners() {
            // Chat functionality removed - button now redirects to cybercrime.gov.in
            
            if (sendBtn) {
                sendBtn.addEventListener('click', sendMessage);
            }
            
            if (chatInput) {
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
            
            function sendMessage() {
                const message = chatInput.value.trim();
                if (!message) return;
                
                addUserMessage(message);
                chatInput.value = '';
                
                setTimeout(() => {
                    const response = generateResponse(message);
                    addBotMessage(response);
                }, 800);
            }
            
            function addUserMessage(text) {
                const msgDiv = document.createElement('div');
                msgDiv.style.cssText = 'margin-bottom: 1rem; text-align: right;';
                msgDiv.innerHTML = '<div style="display: inline-block; max-width: 70%; padding: 0.8rem 1.2rem; background: linear-gradient(135deg, var(--color-cyan), var(--color-purple)); border-radius: 15px 15px 0 15px; color: white; text-align: left;">' + text + '</div>';
                chatMessages.appendChild(msgDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function addBotMessage(text) {
                const msgDiv = document.createElement('div');
                msgDiv.style.cssText = 'margin-bottom: 1rem; text-align: left;';
                msgDiv.innerHTML = '<div style="display: inline-block; max-width: 70%; padding: 0.8rem 1.2rem; background: rgba(0, 243, 255, 0.2); border: 1px solid var(--color-cyan); border-radius: 15px 15px 15px 0; color: var(--color-text);">' + text + '</div>';
                chatMessages.appendChild(msgDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function generateResponse(message) {
                const msgLower = message.toLowerCase();
                
                // Phishing incident
                if (msgLower.includes('phish') || msgLower.includes('fake email') || msgLower.includes('suspicious link')) {
                    return "I understand this is stressful. Here's what to do:<br><br>‚úÖ <strong>Immediate Steps:</strong><br>1. Do NOT click any links in the message<br>2. Do NOT provide any personal information<br>3. Delete the message immediately<br>4. If you clicked a link, change your passwords NOW<br>5. Enable 2FA on all accounts<br><br>üìû <strong>Report:</strong> Call Cyber Crime Helpline at <strong>1930</strong><br><br>You did the right thing by reaching out. Stay safe! üõ°Ô∏è";
                }
                
                // Malware/virus
                if (msgLower.includes('virus') || msgLower.includes('malware') || msgLower.includes('infected') || msgLower.includes('hack')) {
                    return "Don't panic. Let me help you:<br><br>üö® <strong>Immediate Actions:</strong><br>1. Disconnect from internet (WiFi/Ethernet)<br>2. Run a full antivirus scan<br>3. Do NOT make any financial transactions<br>4. Change all passwords from a clean device<br>5. Back up important files to external drive<br><br>üíª <strong>Next Steps:</strong><br>‚Ä¢ Boot in Safe Mode and scan again<br>‚Ä¢ Consider professional help if data is critical<br>‚Ä¢ File a complaint at <strong>cybercrime.gov.in</strong><br><br>You're taking the right steps. Stay strong! üí™";
                }
                
                // Financial fraud
                if (msgLower.includes('money') || msgLower.includes('fraud') || msgLower.includes('scam') || msgLower.includes('payment') || msgLower.includes('transaction')) {
                    return "I'm sorry this happened. Act quickly:<br><br>‚ö†Ô∏è <strong>URGENT - Do This NOW:</strong><br>1. Call your bank IMMEDIATELY and freeze accounts<br>2. Report unauthorized transaction within 24 hours<br>3. File FIR at nearest police station<br>4. Report at <strong>cybercrime.gov.in</strong><br>5. Keep all evidence (screenshots, messages, receipts)<br><br>üìû <strong>Emergency Contacts:</strong><br>‚Ä¢ Cyber Crime: <strong>1930</strong><br>‚Ä¢ Banking Ombudsman: <strong>14440</strong><br><br>Time is critical. The faster you act, the better the chances of recovery. You've got this! üí™";
                }
                
                // Identity theft
                if (msgLower.includes('identity') || msgLower.includes('personal info') || msgLower.includes('stolen') || msgLower.includes('data breach')) {
                    return "This is serious but manageable. Here's your action plan:<br><br>üîí <strong>Protect Yourself:</strong><br>1. Change ALL passwords immediately<br>2. Enable 2FA on all accounts<br>3. Monitor bank statements daily<br>4. Place fraud alert with credit bureaus<br>5. Check for unauthorized accounts opened in your name<br><br>üìã <strong>Document Everything:</strong><br>‚Ä¢ File police complaint (FIR)<br>‚Ä¢ Report to <strong>cybercrime.gov.in</strong><br>‚Ä¢ Notify relevant companies/services<br><br>üìû Help: <strong>1930</strong> (Cyber Crime Helpline)<br><br>You're not alone in this. Take it step by step. üõ°Ô∏è";
                }
                
                // Emotional distress keywords
                if (msgLower.includes('stress') || msgLower.includes('anxious') || msgLower.includes('scared') || msgLower.includes('worried') || msgLower.includes('afraid')) {
                    return "I hear you, and it's completely normal to feel this way. What you're experiencing is valid. üíô<br><br>Remember:<br>‚Ä¢ You are NOT at fault for being targeted<br>‚Ä¢ These feelings will pass<br>‚Ä¢ You're taking positive action by seeking help<br>‚Ä¢ Many people go through this - you're not alone<br><br>üß† <strong>Mental Health Support:</strong><br>‚Ä¢ NIMHANS: <strong>080-46110007</strong><br>‚Ä¢ Vandrevala Foundation: <strong>1860-2662-345</strong><br><br>Would you like to talk about what specific incident happened? I'm here to listen and guide you through the next steps. üíö";
                }
                
                // Harassment/bullying
                if (msgLower.includes('harass') || msgLower.includes('bully') || msgLower.includes('threat') || msgLower.includes('blackmail')) {
                    return "This is NOT okay, and you don't deserve this. Let me help:<br><br>üõ°Ô∏è <strong>Your Safety First:</strong><br>1. DO NOT engage with the person<br>2. Block them on all platforms<br>3. Take screenshots of ALL messages (evidence)<br>4. Do NOT delete anything yet<br>5. Tell someone you trust<br><br>‚öñÔ∏è <strong>Legal Action:</strong><br>‚Ä¢ File complaint at <strong>cybercrime.gov.in</strong><br>‚Ä¢ Call Cyber Helpline: <strong>1930</strong><br>‚Ä¢ Women Helpline: <strong>181</strong><br>‚Ä¢ Consider filing FIR<br><br>üíö <strong>You are brave for reaching out.</strong> This is NOT your fault. Help is available, and you will get through this. Stay strong! üí™";
                }
                
                // General supportive responses
                const supportiveResponses = [
                    "Thank you for sharing that with me. Can you tell me more about what happened? I'm here to help.",
                    "I understand this must be difficult. You're doing the right thing by seeking help. What specific concern can I assist you with?",
                    "You're not alone in this. Many people face similar situations. Let's work through this together. What would help you most right now?",
                    "It takes courage to reach out. I'm here to support you. Would you like guidance on a specific incident or just need someone to talk to?",
                    "Your feelings are valid. Remember, you're taking a positive step by being here. How can I best support you today?"
                ];
                
                return supportiveResponses[Math.floor(Math.random() * supportiveResponses.length)];
            }
        }

        function updateLineNumbers() {
            const lines = codeEditor.value.split('\n').length;
            lineNumbers.textContent = Array.from({ length: lines }, (_, i) => i + 1).join('\n');
        }

        function updateStats() {
            const lines = codeEditor.value.split('\n').length;
            const chars = codeEditor.value.length;
            lineCount.textContent = lines;
            charCount.textContent = chars;
        }

        // Clear button
        document.getElementById('clearCodeBtn').addEventListener('click', function() {
            codeEditor.value = '';
            updateLineNumbers();
            updateStats();
            document.getElementById('scanResults').style.display = 'none';
        });

        // File upload
        const uploadBtn = document.getElementById('uploadCodeBtn');
        const fileInput = document.getElementById('fileUploadInput');

        uploadBtn.addEventListener('click', function() {
            fileInput.click();
        });

        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    codeEditor.value = e.target.result;
                    updateLineNumbers();
                    updateStats();
                };
                reader.readAsText(file);
            }
        });

        // Modal handling
        const downloadModal = document.getElementById('downloadModal');
        const downloadBtn = document.getElementById('downloadBtn');
        const getStartedBtn = document.getElementById('getStartedBtn');
        const closeModal = document.getElementById('closeModal');

        downloadBtn.addEventListener('click', (e) => {
            e.preventDefault();
            downloadModal.classList.add('active');
        });

        getStartedBtn.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('#dashboard').scrollIntoView({ behavior: 'smooth' });
        });

        closeModal.addEventListener('click', () => {
            downloadModal.classList.remove('active');
        });

        downloadModal.addEventListener('click', (e) => {
            if (e.target === downloadModal) {
                downloadModal.classList.remove('active');
            }
        });

        // Animate stats on scroll
        const observerOptions = {
            threshold: 0.5
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const statNumbers = entry.target.querySelectorAll('.stat-number');
                    statNumbers.forEach(stat => {
                        const target = stat.textContent;
                        stat.textContent = '0';
                        animateValue(stat, 0, target);
                    });
                }
            });
        }, observerOptions);

        document.querySelectorAll('.stats-grid').forEach(grid => observer.observe(grid));

        function animateValue(element, start, end) {
            const duration = 2000;
            const endNum = parseInt(end.replace(/[^\d]/g, ''));
            const suffix = end.replace(/[\d.]/g, '');
            let startTime = null;

            function animation(currentTime) {
                if (startTime === null) startTime = currentTime;
                const progress = Math.min((currentTime - startTime) / duration, 1);
                const value = Math.floor(progress * endNum);
                element.textContent = value + suffix;
                
                if (progress < 1) {
                    requestAnimationFrame(animation);
                } else {
                    element.textContent = end;
                }
            }
            
            requestAnimationFrame(animation);
        }

        console.log('%c‚ö° CYBERGUARD %c- Your Digital Guardian', 'color: #00f3ff; font-size: 20px; font-weight: 900;', 'color: #8892a6; font-size: 14px;');
    </script>
</body>
</html>
